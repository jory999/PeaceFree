#include "font.h"
const char font_code_global[94][16]={//Ó¢ÎÄ»ò±êµã·ûºÅ //0x21 -- 0x7e
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x80,},//!
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0xa0,0xa0,},//"
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x28,0xfc,0x28,0x50,0xfc,0x50,0x50,},//#
    {0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x78,0xa8,0xa0,0x60,0x30,0x28,0xa8,0xf0,0x20,},//$
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0xa8,0xb0,0x50,0x28,0x34,0x54,0x48,},//%
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x50,0x50,0x78,0xa8,0xa8,0x90,0x6c,},//&
    {0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,},//'
    {0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x40,0x80,0x80,0x80,0x80,0x80,0x80,0x40,0x20,},//(
    {0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x40,0x20,0x20,0x20,0x20,0x20,0x20,0x40,0x80,},//)
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0xa8,0x70,0x70,0xa8,0x20,},//*
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0xf8,0x20,0x20,0x20,},//+
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x80,},//,
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,},//-
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,},//.
    {0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x10,0x10,0x10,0x20,0x20,0x40,0x40,0x40,0x80,},///
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x88,0x88,0x88,0x88,0x70,},//0
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0xc0,0x40,0x40,0x40,0x40,0x40,0xe0,},//1
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x10,0x20,0x40,0x80,0xf8,},//2
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x08,0x30,0x08,0x08,0x88,0x70,},//3
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x30,0x50,0x50,0x90,0x78,0x10,0x18,},//4
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x80,0x80,0xf0,0x08,0x08,0x88,0x70,},//5
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x90,0x80,0xf0,0x88,0x88,0x88,0x70,},//6
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x90,0x10,0x20,0x20,0x20,0x20,0x20,},//7
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x70,0x88,0x88,0x88,0x70,},//8
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x88,0x78,0x08,0x48,0x70,},//9
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x80,},//:
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x80,0x80,},//;
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x10,0x20,0x40,0x80,0x40,0x20,0x10,0x08,},//<
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x00,0x00,0xf8,},//=
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x10,0x20,0x40,0x80,},//>
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x10,0x20,0x20,0x00,0x20,},//?
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x98,0xa8,0xa8,0xb8,0x80,0x78,},//@
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x30,0x50,0x50,0x78,0x48,0xcc,},//A
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x48,0x48,0x70,0x48,0x48,0x48,0xf0,},//B
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x88,0x80,0x80,0x80,0x80,0x88,0x70,},//C
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x48,0x48,0x48,0x48,0x48,0x48,0xf0,},//D
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x48,0x50,0x70,0x50,0x40,0x48,0xf8,},//E
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x48,0x50,0x70,0x50,0x40,0x40,0xe0,},//F
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x48,0x80,0x80,0x9c,0x88,0x48,0x30,},//G
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xcc,0x48,0x48,0x78,0x48,0x48,0x48,0xcc,},//H
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x20,0x20,0x20,0x20,0x20,0x20,0xf8,},//I
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7c,0x10,0x10,0x10,0x10,0x10,0x10,0x90,0xe0,},//J
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xec,0x48,0x50,0x60,0x50,0x50,0x48,0xec,},//K
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x40,0x40,0x40,0x40,0x40,0x44,0xfc,},//L
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0xd8,0xd8,0xd8,0xa8,0xa8,0xa8,0xa8,},//M
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xdc,0x48,0x68,0x68,0x58,0x58,0x48,0xe8,},//N
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x88,0x88,0x88,0x88,0x70,},//O
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x48,0x48,0x70,0x40,0x40,0x40,0xe0,},//P
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x88,0x88,0x88,0x88,0xe8,0x98,0x70,0x18,},//Q
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x48,0x48,0x70,0x50,0x48,0x48,0xec,},//R
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x88,0x80,0x60,0x10,0x08,0x88,0xf0,},//S
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0xa8,0x20,0x20,0x20,0x20,0x20,0x70,},//T
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xcc,0x48,0x48,0x48,0x48,0x48,0x48,0x30,},//U
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xcc,0x48,0x48,0x50,0x50,0x30,0x20,0x20,},//V
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa8,0xa8,0xa8,0x70,0x50,0x50,0x50,0x50,},//W
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0x50,0x50,0x20,0x20,0x50,0x50,0xd8,},//X
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0x50,0x50,0x20,0x20,0x20,0x20,0x70,},//Y
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x90,0x10,0x20,0x20,0x40,0x48,0xf8,},//Z
    {0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xe0,},//[
    {0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x40,0x40,0x20,0x20,0x20,0x10,0x00,},/* \ */
    {0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xe0,},//]
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0xa0,},//^
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xfc,},//_
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,},//`
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x90,0x70,0x90,0x78,},//a
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x40,0x40,0x70,0x48,0x48,0x48,0x70,},//b
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x90,0x80,0x80,0x70,},//c
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x10,0x10,0x70,0x90,0x90,0x90,0x78,},//d
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x90,0xf0,0x80,0x70,},//e
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x40,0x40,0xf0,0x40,0x40,0x40,0xf0,},//f
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x90,0x60,0x80,0xf0,0x88,0x70,},//g
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x40,0x40,0x70,0x48,0x48,0x48,0xec,},//h
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0xc0,0x40,0x40,0x40,0xe0,},//i
    {0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x30,0x10,0x10,0x10,0x10,0x10,0xe0,},//j
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x40,0x40,0x5c,0x50,0x70,0x48,0xec,},//k
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x20,0x20,0x20,0x20,0x20,0x20,0xf8,},//l
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0xa8,0xa8,0xa8,0xa8,},//m
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x48,0x48,0x48,0xec,},//n
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x90,0x90,0x90,0x60,},//o
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x48,0x48,0x48,0x70,0x40,0xe0,},//p
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x90,0x90,0x90,0x70,0x10,0x38,},//q
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0x60,0x40,0x40,0xe0,},//r
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x80,0x60,0x10,0xf0,},//s
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0xe0,0x40,0x40,0x40,0x30,},//t
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0x48,0x48,0x48,0x3c,},//u
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xec,0x48,0x50,0x30,0x20,},//v
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa8,0xa8,0x70,0x50,0x50,},//w
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd8,0x50,0x20,0x50,0xd8,},//x
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xec,0x48,0x50,0x30,0x20,0x20,0xc0,},//y
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x20,0x40,0x40,0xf0,},//z
    {0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x40,0x40,0x40,0x80,0x40,0x40,0x40,0x40,0x60,},//{
    {0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,},//|
    {0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x40,0x40,0x40,0x20,0x40,0x40,0x40,0x40,0xc0,},//}
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0xa4,0x18,},//~
};

const char font_code_globalA[16] = {0x00,0x18,0x18,0x18,0x18,0x24,0x24,0x24,0x24,0x7e,0x42,0x42,0x42,0xe7,0x00,0x00};

 unsigned char table_rgb[16 * 3] = {
		0x00, 0x00, 0x00,	/*  0:黑 */
		0xff, 0x00, 0x00,	/*  1:梁红 */
		0x00, 0xff, 0x00,	/*  2:亮绿 */
		0xff, 0xff, 0x00,	/*  3:亮黄 */
		0x00, 0x00, 0xff,	/*  4:亮蓝 */
		0xff, 0x00, 0xff,	/*  5:亮紫 */
		0x00, 0xff, 0xff,	/*  6:浅亮蓝 */
		0xff, 0xff, 0xff,	/*  7:白 */
		0xc6, 0xc6, 0xc6,	/*  8:亮灰 */
		0x84, 0x00, 0x00,	/*  9:暗红 */
		0x00, 0x84, 0x00,	/* 10:暗绿 */
		0x84, 0x84, 0x00,	/* 11:暗黄 */
		0x00, 0x00, 0x84,	/* 12:暗青 */
		0x84, 0x00, 0x84,	/* 13:暗紫 */
		0x00, 0x84, 0x84,	/* 14:浅暗蓝 */
		0x84, 0x84, 0x84	/* 15:暗灰 */
	};

     char cursor[16][16] = {
		"**************..",
		"*OOOOOOOOOOO*...",
		"*OOOOOOOOOO*....",
		"*OOOOOOOOO*.....",
		"*OOOOOOOO*......",
		"*OOOOOOO*.......",
		"*OOOOOOO*.......",
		"*OOOOOOOO*......",
		"*OOOO**OOO*.....",
		"*OOO*..*OOO*....",
		"*OO*....*OOO*...",
		"*O*......*OOO*..",
		"**........*OOO*.",
		"*..........*OOO*",
		"............*OO*",
		".............***" 
	}; 

#define KEY_ESC                        0X01        // ESC
#define KEY_1                          0X02        // 1
#define KEY_2                          0X03        // 2
#define KEY_3                          0X04        // 3
#define KEY_4                          0X05        // 4
#define KEY_5                          0X06        // 5
#define KEY_6                          0X07        // 6
#define KEY_7                          0X08        // 7
#define KEY_8                          0X09        // 8
#define KEY_9                          0X0A        // 9
#define KEY_0                          0X0B        // 0
#define KEY_DASH                       0X0C        // -
#define KEY_EQUAL                      0X0D        // =
#define KEY_BACKSPACE                  0X0E        // BACKSPACE
#define KEY_TAB                        0X0F        // TAB
#define KEY_Q                          0X10        // Q
#define KEY_W                          0X11        // W
#define KEY_E                          0X12        // E
#define KEY_R                          0X13        // R
#define KEY_T                          0X14        // T
#define KEY_Y                          0X15        // Y
#define KEY_U                          0X16        // U
#define KEY_I                          0X17        // I
#define KEY_O                          0X18        // O
#define KEY_P                          0X19        // P
#define KEY_LBRACKET                   0X1A        // [
#define KEY_RBRACKET                   0X1B        // ]
#define KEY_ENTER                      0X1C        // ENTER
#define KEY_CTRL                       0X1D        // CTRL
#define KEY_A                          0X1E        // A
#define KEY_S                          0X1F        // S
#define KEY_D                          0X20        // D
#define KEY_F                          0X21        // F
#define KEY_G                          0X22        // G
#define KEY_H                          0X23        // H
#define KEY_J                          0X24        // J
#define KEY_K                          0X25        // K
#define KEY_L                          0X26        // L
#define KEY_SEMICOLON                  0X27        // ;
#define KEY_RQUOTE                     0X28        // '
#define KEY_LQUOTE                     0X29        // `
#define KEY_LEFT_SHIFT                 0X2A        // LEFT SHIFT
#define KEY_BACKSLASH                  0X2B        // '\'
#define KEY_Z                          0X2C        // Z
#define KEY_X                          0X2D        // X
#define KEY_C                          0X2E        // C
#define KEY_V                          0X2F        // V
#define KEY_B                          0X30        // B
#define KEY_N                          0X31        // N
#define KEY_M                          0X32        // M
#define KEY_COMMA                      0X33        // ,
#define KEY_PERIOD                     0X34        // .
#define KEY_SLASH                      0X35        // /
#define KEY_RIGHT_SHIFT                0X36        // RIGHT SHIFT
#define KEY_PRTSC                      0X37        // PRINT SCREEN
#define KEY_ALT                        0X38        // ALT
#define KEY_SPACE                      0X39        // SPACE
#define KEY_CAPS_LOCK                  0X3A        // CAPS LOCK
#define KEY_F1                         0X3B        // F1
#define KEY_F2                         0X3C        // F2
#define KEY_F3                         0X3D        // F3
#define KEY_F4                         0X3E        // F4
#define KEY_F5                         0X3F        // F5
#define KEY_F6                         0X40        // F6
#define KEY_F7                         0X41        // F7
#define KEY_F8                         0X42        // F8
#define KEY_F9                         0X43        // F9
#define KEY_F10                        0X44        // F10
#define KEY_NUM_LOCK                   0X45        // NUM LOCK
#define KEY_SCROLL_LOCK                0X46        // SCROLL LOCK
#define KEY_HOME                       0X47        // HOME
#define KEY_UP                         0X48        // UP
#define KEY_PAGE_UP                    0X49        // PAGE UP
#define KEY_SUB                        0X4A        // SUB
#define KEY_LEFT                       0X4B        // LEFT
#define KEY_CENTER                     0X4C        // CENTER
#define KEY_RIGHT                      0X4D        // RIGHT
#define KEY_ADD                        0X4E        // ADD
#define KEY_END                        0X4F        // END
#define KEY_DOWN                       0X50        // DOWN
#define KEY_PAGE_DOWN                  0X51        // PAGE DOWN
#define KEY_INSERT                     0X52        // INSERT
#define KEY_DEL                        0X53        // DEL


char keys[0x53][2] =
{
        { 0x0, 0x0 },        // ESC
        { '1', '!' },        // 1
        { '2', '@' },        // 2
        { '3', '#' },        // 3
        { '4', '$' },        // 4
        { '5', '%' },        // 5
        { '6', '^' },        // 6
        { '7', '&' },        // 7
        { '8', '*' },        // 8
        { '9', '(' },        // 9
        { '0', ')' },        // 0
        { '-', '_' },        // -
        { '=', '+' },        // =
        { 0x0, 0x0 },        // BACKSPACE
        { 0x0, 0x0 },        // TAB
        { 'q', 'Q' },        // Q
        { 'w', 'W' },        // W
        { 'e', 'E' },        // E
        { 'r', 'R' },        // R
        { 't', 'T' },        // T
        { 'y', 'Y' },        // Y
        { 'u', 'U' },        // U
        { 'i', 'I' },        // I
        { 'o', 'O' },        // O
        { 'p', 'P' },        // P
        { '[', '{' },        // [
        { ']', '}' },        // ]
        { '\n', 0x0 },       // ENTER
        { 0x0, 0x0 },        // CTRL
        { 'a', 'A' },        // A
        { 's', 'S' },        // S
        { 'd', 'D' },        // D
        { 'f', 'F' },        // F
        { 'g', 'G' },        // G
        { 'h', 'H' },        // H
        { 'j', 'J' },        // J
        { 'k', 'K' },        // K
        { 'l', 'L' },        // L
        { ';', ':' },        // ;
        { '\'', '"' },       // '
        { '`', '~' },        // `
        { 0x0, 0x0 },        // LEFTSHIFT
        { '\\', '|' },       // '\'
        { 'a', 'Z' },        // Z
        { 'x', 'X' },        // X
        { 'c', 'C' },        // C
        { 'v', 'V' },        // V
        { 'b', 'B' },        // B
        { 'n', 'N' },        // N
        { 'm', 'M' },        // M
        { ',', '<' },        // ,
        { '.', '>' },        // .
        { '/', '?' },        // /
        { 0x0, 0x0 },        // RIGHTSHIFT
        { 0x0, 0x0 },        // PRINTSCREEN
        { 0x0, 0x0 },        // ALT
        { 0x0, 0x0 },        // SPACE
        { 0x0, 0x0 },        // CAPSLOCK
        { 0x0, 0x0 },        // F1
        { 0x0, 0x0 },        // F2
        { 0x0, 0x0 },        // F3
        { 0x0, 0x0 },        // F4
        { 0x0, 0x0 },        // F5
        { 0x0, 0x0 },        // F6
        { 0x0, 0x0 },        // F7
        { 0x0, 0x0 },        // F8
        { 0x0, 0x0 },        // F9
        { 0x0, 0x0 },        // F10
        { 0x0, 0x0 },        // NUMLOCK
        { 0x0, 0x0 },        // SCROLLLOCK
        { 0x0, 0x0 },        // HOME
        { 0x0, 0x0 },        // UP
        { 0x0, 0x0 },        // PAGEUP
        { 0x0, 0x0 },        // SUB
        { 0x0, 0x0 },        // LEFT
        { 0x0, 0x0 },        // CENTER
        { 0x0, 0x0 },        // RIGHT
        { 0x0, 0x0 },        // ADD
        { 0x0, 0x0 },        // END
        { 0x0, 0x0 },        // DOWN
        { 0x0, 0x0 },        // PAGEDOWN
        { 0x0, 0x0 },        // INSERT
        { 0x0, 0x0 }         // DEL
};
//extern void PutString(int x,int y, int color, unsigned char *str111);
struct BOOTINFO1{
       char xyls, leds, vmode, reserve;
       short scrnx, scrny;
       char *vram ;

};
void DefaultIntCallBack()//回调函数
{
    char *vram;
    int xsize, ysize;
    struct BOOTINFO1 *binfo;

    binfo = (struct BOOTINFO1 * ) 0x0ff0;
    xsize = (*binfo).scrnx;
    ysize = (*binfo).scrny;
    vram  = (*binfo).vram;
    //PutString(100, 100,"There Is An INT!!!!\0",0xffffff);
     // unsigned  char *nowput9="There Is An INT";
      //putfonts8_asc(binfo->vram, binfo->scrnx, 0, 0, 7, nowput9);
     // PutString(binfo->vram, binfo->scrnx,60, 90,7,nowput9);
	/* unsigned  char *nowput9="There Is An INT";
      PutString(binfo->vram, binfo->scrnx,10, 90,7,nowput9); */

	
}  


#define FLAGS_OVERRUN		0x0001

void fifo8_init(struct FIFO8 *fifo, int size, unsigned char *buf)
/* 初始化FIFO缓冲区 */
{
	fifo->size = size;
	fifo->buf = buf;
	fifo->free = size; /* 缓冲区大小 */
	fifo->flags = 0;
	fifo->p = 0; /* 下一个数据写入位置 */
	fifo->q = 0; /* 下一个数据读出位置 */
	return;
}

int fifo8_put(struct FIFO8 *fifo, unsigned char data)
/* 向FIFO传送数据并保存 */
{
	if (fifo->free == 0) {
		/* 没有空间了，溢出 */
		fifo->flags |= FLAGS_OVERRUN;
		return -1;
	}
	fifo->buf[fifo->p] = data;
	fifo->p++;
	if (fifo->p == fifo->size) {
		fifo->p = 0;
	}
	fifo->free--;
	return 0;
}

int fifo8_get(struct FIFO8 *fifo)
/* 从FIFO取得一个数据 */
{
	int data;
	if (fifo->free == fifo->size) {
		/* 如果缓冲区为空则返回-1 */
		return -1;
	}
	data = fifo->buf[fifo->q];
	fifo->q++;
	if (fifo->q == fifo->size) {
		fifo->q = 0;
	}
	fifo->free++;
	return data;
}

int fifo8_status(struct FIFO8 *fifo)
/* 报告一下积攒是数据量 */
{
	return fifo->size - fifo->free;
}

#define PORT_KEYDAT		0x0060

struct FIFO8 keyfifo;

 void inthandler21(int *esp)
/* 来自PS/2键盘的中断 */
{
	

    //    //struct BOOTINFO1 *binfo = (struct BOOTINFO *) 0x0ff0;
	//unsigned char data, s[4];
	//FunctionOut8(PIC0_OCW2, 0x61);	/* 通知PIC IRQ-01 已经受理完毕 */
	//data = FuntionIn8(PORT_KEYDAT);
	//fifo8_put(&keyfifo, data);
        //Int2String(data, s);
        //boxfill8(binfo->vram, binfo->scrnx, 0, 0, 0, 32 * 8 - 1, 15);
        //boxfill8(binfo->vram, binfo->scrnx, 0,  0, 16, 15, 31);
        //PutIntHex(binfo->vram, binfo->scrnx, 0, 80, 7, data);
        
        //putfonts8_asc(binfo->vram, binfo->scrnx, 0, 0, 7, s);
	//return;

    ////////////////////////////////////
 //取得扫描码
        struct BOOTINFO1 *binfo = (struct BOOTINFO *) 0x0ff0;
        unsigned char scan_code = FuntionIn8(0x60);
                                   
        //扫描码的索引
        unsigned char key_ind = scan_code & 0x7f;
        //shift按下
    static unsigned char kb_key_shift = 0x0;
    static unsigned char word_x=0;
    word_x++;
    //printf(0,word_x*16,0xffffff,"sao miao ma:%x",scan_code);
    printaaa(binfo->vram, binfo->scrnx, 0, word_x*16, 7,"sao miao ma:%x",scan_code);
        if ((key_ind == KEY_LEFT_SHIFT || key_ind == KEY_RIGHT_SHIFT) && ((scan_code & 0x80) == 0x00))//按键的最高位，0为按下，1为抬起
        {
                kb_key_shift = 0x1;
        
        PutString(binfo->vram, binfo->scrnx,100, 100, 7, "shift down:" );
        }
        //shift抬起
        else if ((key_ind == KEY_LEFT_SHIFT || key_ind == KEY_RIGHT_SHIFT) && ((scan_code & 0x80) == 0x80))
        {
                kb_key_shift = 0x0;
        
        PutString(binfo->vram, binfo->scrnx,100, 116, 7, "shift up:" );
        }
        if (((scan_code & 0x80) == 0x80))
        {
                //显示字符
        
        printaaa(binfo->vram, binfo->scrnx, 200, (word_x*16)/2, 7,"char is :%c",keys[key_ind-1][kb_key_shift]);
        }
        //清除键盘状态可以接受新按键，不清除shift位置
        FunctionOut8(scan_code & 0x7f, 0x61);
        //通知PIC可以接受新中断
        FunctionOut8(0x20, 0x20);


}

struct FIFO8 mousefifo;
void inthandler2c(int *esp)
/* 来自PS/2鼠标的中断 */
{
	/* struct BOOTINFO1 *binfo = (struct BOOTINFO *) 0x0ff0;
	boxfill8(binfo->vram, binfo->scrnx, 0, 0, 0, 32 * 8 - 1, 15);
     unsigned  char nowput92[66]="IINT 2C (IRQ-12) : PS/2 mouse";
	putfonts8_asc(binfo->vram, binfo->scrnx, 0, 0, 7, nowput92);
	for (;;) {
		FunctionHlt();
	} */
    //struct BOOTINFO1 *binfo = (struct BOOTINFO *) 0x0ff0;
    unsigned char data,s[10];
	FunctionOut8(PIC1_OCW2, 0x64);	/* 通知PIC IRQ-12 已经受理完毕 */
	FunctionOut8(PIC0_OCW2, 0x62);	/* 通知PIC IRQ-02 已经受理完毕 */
	data = FuntionIn8(PORT_KEYDAT);
	fifo8_put(&mousefifo, data);

    //Int2String(data, s);
    //boxfill8(binfo->vram, binfo->scrnx, 0, 0, 0, 32 * 8 - 1, 15);
    //PutIntHex(binfo->vram, binfo->scrnx, 0, 90, 7, data);
    //putfonts8_asc(binfo->vram, binfo->scrnx, 160, 0, 7, s);
    //printaaa(binfo->vram, binfo->scrnx, 20, 100, 7,"Mouse  %s" ,"Here");
    
	return;
}

void inthandler27(int *esp)
/* PIC0中断的不完整策略 */
/* 这个中断在Athlon64X2上通过芯片组提供的便利，只需执行一次 */
/* 这个中断只是接收，不执行任何操作 */
/* 为什么不处理？
	→  因为这个中断可能是电气噪声引发的、只是处理一些重要的情况。*/
{
	FunctionOut8(0x0020, 0x67); /* 通知PIC的IRQ-07（参考7-1） */
	return;
}
void asm_inthandler21(void);
void asm_inthandler27(void);
void asm_inthandler2c(void);

//void asm_DefaultIntCallBack(void);

extern void FunctionLidt(short, void *);


/* void set_gatedesc(struct GATE_DESCRIPTOR *gd, int offset, int selector, int ar)
{
	gd->offset_low   = offset & 0xffff;
	gd->selector     = selector;
	gd->dw_count     = (ar >> 8) & 0xff;
	gd->access_right = ar & 0xff;
	gd->offset_high  = (offset >> 16) & 0xffff;
	return;
} */

void InitIDT()
{
    static struct idt_struct{
    short   offset1;
    short   selector;
    short   no_use;
    short   offset2;
    } idt[0x30];//初始化0~0x30的中断

   

    int i;
    ////////////#0，必须有0项
    idt[0].offset1 = 0x00;
    idt[0].selector = 0x00;
    idt[0].no_use = 0x00;
    idt[0].offset2 = 0x00;
    for (i=1;i<0x30;i++)
    {
       
        
        idt[i].offset1 = (short)((int)(void*)DefaultIntCallBack);
        idt[i].selector = 0x0008;
        idt[i].no_use = 0x8e00;
        idt[i].offset2 = (short)(((int)(void*)DefaultIntCallBack)>>16);  
    }
        idt[0x21].offset1 = (short)((int)(void*)asm_inthandler21);
        idt[0x21].selector = 0x0008;
        idt[0x21].no_use = 0x8e00;
        idt[0x21].offset2 = (short)(((int)(void*)asm_inthandler21)>>16);  

        idt[0x2c].offset1 = (short)((int)(void*)asm_inthandler2c);
        idt[0x2c].selector = 0x0008;
        idt[0x2c].no_use = 0x8e00;
        idt[0x2c].offset2 = (short)(((int)(void*)asm_inthandler2c)>>16);  

    /* IDT设置*/
/* 
	set_gatedesc(idt + 0x21, (int) asm_inthandler21, 2 * 8, AR_INTGATE32);
	set_gatedesc(idt + 0x27, (int) asm_inthandler27, 2 * 8, AR_INTGATE32);
	set_gatedesc(idt + 0x2c, (int) asm_inthandler2c, 2 * 8, AR_INTGATE32);
     */
    FunctionLidt(0x30*8-1,idt );
}

/* void InitIDT()
{
    static struct idt_struct{
    short   offset1;
    short   selector;
    short   no_use;
    short   offset2;
    } idt[0x30];//初始化0~0x30的中断

   

    int i;
    ////////////#0，必须有0项
    idt[0].offset1 = 0x00;
    idt[0].selector = 0x00;
    idt[0].no_use = 0x00;
    idt[0].offset2 = 0x00;
    for (i=1;i<0x30;i++)
    {
       
        
        idt[i].offset1 = (short)((int)(void*)DefaultIntCallBack-0x8200);
        idt[i].selector = 0x0008;
        idt[i].no_use = 0x8e00;
        idt[i].offset2 = (short)(((int)(void*)DefaultIntCallBack-0x8200)>>16);  
    }
        idt[0x21].offset1 = (short)((int)(void*)asm_inthandler21-0x8200);
        idt[0x21].selector = 0x0008;
        idt[0x21].no_use = 0x8e00;
        idt[0x21].offset2 = (short)(((int)(void*)asm_inthandler21-0x8200)>>16);  

        idt[0x2c].offset1 = (short)((int)(void*)asm_inthandler2c-0x8200);
        idt[0x2c].selector = 0x0008;
        idt[0x2c].no_use = 0x8e00;
        idt[0x2c].offset2 = (short)(((int)(void*)asm_inthandler2c-0x8200)>>16);  

   
    FunctionLidt(0x30*8-1,idt);
} */